{% extends "base.html" %}
{% import "navbar.html" as navbar %}

{% block content %}

{{ navbar.navbar(current_user) }}
<section style="font-size: small;padding: 10%;background-color: rgb(248,249,250);">
    <div class="container-fluid container-title pb-7p">
        <div class="row">
            <div class="col">
                <h1 class="fs-1-lg lh-base pt-15p">
                    Stop guessing, start growing: Build your unique skillset
                </h1>
                <p class="fs-6 pb-4">
                    Build a unique skillset based on your natural talents and watch your career and life flourish.
                </p>
                {% if not current_user.is_authenticated %}
                <a href="{{ url_for('register') }}" class="btn btn-outline-secondary btn-lg rounded rounded-0" type="button">
                    Sign up
                </a>
                {% endif %}
            </div>
            <div class="col text-center d-none d-lg-block d-xl-block d-xxl-block">
                <img src="{{ url_for('static', filename='images/study.png') }}" alt="study-img" class="img-fluid">
            </div>
        </div>
    </div>
</section>
<hr>

<div class="container">
<div class="row">
    {% for i in range(8) %}
    <div class="col mb-3">
        <div class="card border rounded rounded-0" style="width: 18rem;">
            <img src="https://via.placeholder.com/150" class="card-img-top rounded-circle mx-auto d-block mt-3" alt="Profile Picture"
                style="width: 100px">
            <div class="card-body text-center">
                <h5 class="card-title">John Doe</h5>
                <p class="card-text">A passionate developer with expertise in web development, eager to learn and collaborate.</p>
                <a href="#" class="btn btn-primary">Contact</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
</div>

{% block bottom_script %}
<script>
    var data = [{
        { id: 1, title: "JavaScript Basics", category: "Programming" },
        { id: 11, title: "JavaScript Advanced", category: "Programming" },
        { id: 2, title: "Advanced CSS Techniques", category: "Design" },
        { id: 3, title: "HTML5 Introduction", category: "Programming" },
        { id: 4, title: "Responsive Web Design", category: "Design" },
        { id: 5, title: "Node.js for Beginners", category: "Programming" },
        { id: 6, title: "UI/UX Principles", category: "Design" },
        { id: 7, title: "React.js Guide", category: "Programming" },
        { id: 8, title: "Graphic Design Basics", category: "Design" },
        { id: 9, title: "Python Programming", category: "Programming" },
        { id: 10, title: "Flexbox and Grid Layouts", category: "Design" },
    }]

    let currentIndex = -1;  // Track the current selection index

    // Elements
    const searchInput = document.getElementById('searchInput');
    const suggestionsList = document.getElementById('suggestionsList');

    // Event Listener for typing
    searchInput.addEventListener('input', handleInput);

    // Event Listener for arrow keys and enter key
    searchInput.addEventListener('keydown', handleKeyDown);

    function handleInput() {
        const query = searchInput.value.trim().toLowerCase();
        suggestionsList.innerHTML = ''; // Clear previous suggestions
        currentIndex = -1;  // Reset the index on new input

        if (query === '') {
            suggestionsList.style.display = 'none';
            return;
        }

        // Simple case-insensitive substring match
        const results = data.filter(item => item.title.toLowerCase().includes(query));

        if (results.length > 0) {
            results.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item.title;
                li.style.padding = "10px";
                li.style.cursor = "pointer";
                li.style.borderBottom = "1px solid #ccc";
                li.addEventListener('click', () => {
                    searchInput.value = item.title;  // Select the suggestion
                    suggestionsList.innerHTML = '';  // Clear suggestions after selection
                    suggestionsList.style.display = 'none';
                });
                suggestionsList.appendChild(li);
            });
            suggestionsList.style.display = 'block';
        } else {
            suggestionsList.style.display = 'none';
        }
    }

    function handleKeyDown(e) {
        const items = suggestionsList.getElementsByTagName('li');
        if (suggestionsList.style.display === 'block' && items.length > 0) {
            if (e.key === 'ArrowDown') {
                currentIndex = (currentIndex + 1) % items.length;
                updateHighlight(items);
            } else if (e.key === 'ArrowUp') {
                currentIndex = (currentIndex - 1 + items.length) % items.length;
                updateHighlight(items);
            } else if (e.key === 'Enter' && currentIndex > -1) {
                searchInput.value = items[currentIndex].textContent;  // Select the highlighted suggestion
                suggestionsList.innerHTML = '';  // Clear suggestions after selection
                suggestionsList.style.display = 'none';
            }
        }
    }

    function updateHighlight(items) {
        // Remove active class from all items
        for (let i = 0; i < items.length; i++) {
            items[i].style.backgroundColor = '';
            items[i].style.color = '';
        }

        // Highlight the current item
        items[currentIndex].style.backgroundColor = '#3498db';
        items[currentIndex].style.color = 'white';
    }
</script>

{% endblock %}

{% endblock %}